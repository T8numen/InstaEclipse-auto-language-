ä»…åŸºäºè¿™ä¸ªä»“åº“ä»£ç ï¼Œæˆ‘èƒ½åšçš„äº‹ä¸»è¦åŒ…æ‹¬ï¼š

* è¯»æºç å¹¶ç”»æ¸…æ¥šæ¨¡å—å…¥å£ã€Hook æµç¨‹ã€æ¯ä¸ªåŠŸèƒ½ç‚¹å¯¹åº”çš„ç±»/æ–¹æ³•ï¼ˆä¾‹å¦‚ UI æ˜¯æ€ä¹ˆæ³¨å…¥åˆ° Instagram é‡Œçš„ï¼‰
* å®šä½æ‰€æœ‰ç•Œé¢æ–‡æ¡ˆæ¥æºï¼ˆresources è¿˜æ˜¯ä»£ç ç¡¬ç¼–ç ï¼‰ï¼Œåšå…¨é‡æ±‰åŒ–/è¡¥ç¿»è¯‘/ä¸€è‡´æ€§ä¿®æ­£
* ç»™å‡ºå¯ç›´æ¥åº”ç”¨çš„æ”¹åŠ¨æ–¹æ¡ˆï¼ˆdiff/è¡¥ä¸ï¼‰ï¼Œå¹¶æŒ‡å‡ºéœ€è¦æ”¹å“ªäº›æ–‡ä»¶ã€æ€ä¹ˆç¼–è¯‘æ‰“åŒ…æˆå¯å®‰è£… APK
* åšåŠŸèƒ½æ”¹é€ ï¼ˆåŠ å¼€å…³ã€åŠ æ–° Hook ç‚¹ã€å…¼å®¹æ–°ç‰ˆæœ¬ã€ä¿®å´©æºƒã€åŠ æ—¥å¿—ç­‰ï¼‰

ä½ è¯´çš„â€œå¼¹çª—ç•Œé¢â€æ˜¯å¯ä»¥æ±‰åŒ–çš„ï¼Œä½†è¿™ä¸ªé¡¹ç›®æœ‰ä¸€ä¸ªå…³é”®ç‚¹ï¼š**å¼¹çª—æ˜¯æ³¨å…¥åœ¨ Instagram è¿›ç¨‹é‡Œçš„**ï¼Œå®ƒæ˜¯ç”± `UIHookManager` åœ¨é•¿æŒ‰æœç´¢æŒ‰é’®æ—¶è°ƒç”¨ `DialogUtils.showEclipseOptionsDialog(activity)` å¼¹å‡ºæ¥çš„ã€‚([GitHub][1])
è€Œ `DialogUtils` é‡Œå¤§é‡æ–‡æ¡ˆæ˜¯ **ç›´æ¥å†™æ­»è‹±æ–‡å­—ç¬¦ä¸²**ï¼ˆæ¯”å¦‚èœå•é¡¹ã€Close/Backã€å„å¼€å…³æ ‡é¢˜ç­‰ï¼‰ï¼Œæ‰€ä»¥å°±ç®—é¡¹ç›®å·²ç»æœ‰ä¸­æ–‡ `values-zh-rCN/strings.xml`ï¼Œè¿™äº›å¼¹çª—ä¹Ÿä¸ä¼šè‡ªåŠ¨å˜ä¸­æ–‡ã€‚([GitHub][2])

## æ­£ç¡®æ±‰åŒ–æ€è·¯ï¼ˆæ¨èï¼‰

1. **æŠŠå¼¹çª—æ–‡æ¡ˆå…¨éƒ¨ç§»åˆ° strings.xml**ï¼ˆæ–°å¢ä¸€ç»„ `ig_dialog_*` keyï¼‰
2. åœ¨ Instagram è¿›ç¨‹é‡Œæ˜¾ç¤ºå¼¹çª—æ—¶ï¼Œç”¨ `createPackageContext(CommonUtils.MY_PACKAGE_NAME, â€¦)` å–åˆ°æ¨¡å—è‡ªå·±çš„èµ„æºå† `getString()`ï¼Œå¦åˆ™ç›´æ¥ `context.getString(R.string.xxx)` ä¼šæŒ‡å‘ Instagram çš„èµ„æºè¡¨ã€‚`MY_PACKAGE_NAME` åœ¨ `CommonUtils` é‡Œå°±æ˜¯ `ps.reso.instaeclipse`ã€‚([GitHub][3])

ä¸‹é¢ç»™ä½ ä¸€å¥—â€œå¯è½åœ°â€çš„æœ€å°æ”¹æ³•ï¼ˆæ ¸å¿ƒä»£ç  + éœ€è¦æ–°å¢çš„å­—ç¬¦ä¸² keyï¼‰ã€‚

---

## 1) ä¿®æ”¹ `DialogUtils.java`ï¼ˆæ ¸å¿ƒï¼‰

åœ¨ `DialogUtils` é‡ŒåŠ èµ„æºè¯»å– helperï¼Œç„¶åæŠŠæ‰€æœ‰ `setText("...") / createSwitch(context, "...")` ç­‰ç¡¬ç¼–ç æ›¿æ¢ä¸º `tr(context, R.string.xxx, "fallback")`ã€‚

```java
// imports é‡Œè¡¥ä¸Š
import ps.reso.instaeclipse.R;
import ps.reso.instaeclipse.utils.core.CommonUtils;

private static Context getModuleContext(Context context) {
    try {
        return context.createPackageContext(
                CommonUtils.MY_PACKAGE_NAME,
                Context.CONTEXT_IGNORE_SECURITY
        );
    } catch (Exception e) {
        return context;
    }
}

private static String tr(Context context, int resId, String fallback, Object... args) {
    try {
        Context mc = getModuleContext(context);
        return (args == null || args.length == 0) ? mc.getString(resId) : mc.getString(resId, args);
    } catch (Exception ignored) {
        return fallback;
    }
}
```

ç¤ºä¾‹æ›¿æ¢ï¼ˆåŒç±»æ›¿æ¢è¦åšä¸€éï¼‰ï¼š

```java
title.setText(tr(context, R.string.ig_dialog_title, "InstaEclipse ğŸŒ˜"));

mainLayout.addView(createClickableSection(
    context,
    tr(context, R.string.ig_dialog_menu_dev_options, "ğŸ› Developer Options"),
    () -> showDevOptions(context)
));

closeButton.setText(tr(context, R.string.ig_dialog_close, "âŒ Close"));
backBtn.setText(tr(context, R.string.ig_dialog_back, "â† Back"));
```

å¦å¤–ä¸¤ä¸ªå¸¸è§ç‚¹ï¼š

* `showSimpleDialog(...).setPositiveButton("OK", ...)` å»ºè®®ç›´æ¥æ”¹æˆ `android.R.string.ok`ï¼ˆç³»ç»Ÿè‡ªåŠ¨æœ¬åœ°åŒ–ï¼‰
* æé™æ¨¡å¼ç¡®è®¤æ¡†é‡Œçš„ `"Yes"/"Cancel"` å»ºè®®æ”¹æˆ `android.R.string.yes` / `android.R.string.cancel`

---

## 2) åœ¨ `app/src/main/res/values/strings.xml` å¢åŠ ï¼ˆè‹±æ–‡é»˜è®¤ï¼‰

æŠŠä¸‹é¢è¿™æ®µåŠ åˆ° `</resources>` å‰ï¼š

```xml
<!-- In-app dialog shown inside Instagram (Xposed UI) -->
<string name="ig_dialog_title">InstaEclipse ğŸŒ˜</string>
<string name="ig_dialog_menu_dev_options">ğŸ› Developer Options</string>
<string name="ig_dialog_menu_ghost_settings">ğŸ‘» Ghost Mode Settings</string>
<string name="ig_dialog_menu_ad_analytics_block">ğŸ›¡ Ad/Analytics Block</string>
<string name="ig_dialog_menu_distraction_free">ğŸ§˜ Distraction-Free Instagram</string>
<string name="ig_dialog_menu_misc_features">âš™ Misc Features</string>
<string name="ig_dialog_menu_about">â„¹ï¸ About</string>
<string name="ig_dialog_menu_restart_app">ğŸ” Restart App</string>

<string name="ig_dialog_close">âŒ Close</string>
<string name="ig_dialog_back">â† Back</string>

<string name="ig_dialog_section_dev_options">Developer Options ğŸ›</string>
<string name="ig_dialog_section_ghost_mode">Ghost Mode ğŸ‘»</string>
<string name="ig_dialog_section_ad_analytics">Ad/Analytics Block ğŸ›¡ï¸</string>
<string name="ig_dialog_section_distraction_free">Distraction-Free Instagram ğŸ§˜</string>
<string name="ig_dialog_section_misc">Miscellaneous âš™ï¸</string>
<string name="ig_dialog_section_about">About</string>
<string name="ig_dialog_section_restart">Restart App</string>
<string name="ig_dialog_section_quick_toggle">Customize Quick Toggle ğŸ› ï¸</string>

<string name="ig_dialog_dev_enable">Enable Developer Mode</string>
<string name="ig_dialog_dev_import">ğŸ“¥ Import Dev Config</string>
<string name="ig_dialog_dev_export">ğŸ“¤ Export Dev Config</string>
<string name="ig_dialog_error">Error</string>
<string name="ig_dialog_unable_open_ui">Unable to open InstaEclipse UI.</string>
<string name="ig_dialog_instagram_not_ready">Instagram is not open or ready.</string>

<string name="ig_dialog_customize_quick_toggle">ğŸ›  Customize Quick Toggle</string>
<string name="ig_dialog_quick_include_hide_seen">Include Hide Seen</string>
<string name="ig_dialog_quick_include_hide_typing">Include Hide Typing</string>
<string name="ig_dialog_quick_include_disable_screenshot">Include Disable Screenshot Detection</string>
<string name="ig_dialog_quick_include_hide_view_once">Include Hide View Once</string>
<string name="ig_dialog_quick_include_hide_story_seen">Include Hide Story Seen</string>
<string name="ig_dialog_quick_include_hide_live_seen">Include Hide Live Seen</string>

<string name="ig_dialog_ghost_hide_seen">Hide Seen</string>
<string name="ig_dialog_ghost_hide_typing">Hide Typing</string>
<string name="ig_dialog_ghost_disable_screenshot">Disable Screenshot Detection</string>
<string name="ig_dialog_ghost_hide_view_once">Hide View Once</string>
<string name="ig_dialog_ghost_hide_story_seen">Hide Story Seen</string>
<string name="ig_dialog_ghost_hide_live_seen">Hide Live Seen</string>

<string name="ig_dialog_ad_block_ads">Block Ads</string>
<string name="ig_dialog_ad_block_analytics">Block Analytics</string>
<string name="ig_dialog_ad_disable_tracking_links">Disable Tracking Links</string>

<string name="ig_dialog_extreme_mode">Extreme Mode ğŸ”’ (Irreversible until reinstall)</string>
<string name="ig_dialog_disable_reels_except_dm">Disable Reels Except in DMs</string>
<string name="ig_dialog_extreme_confirm_title">Activate Extreme Mode?</string>
<string name="ig_dialog_extreme_confirm_message">Once activated, you cannot disable Distraction-Free Mode until you reinstall the app. Continue?</string>

<string name="ig_dialog_disable_repost">Disable Repost</string>

<string name="ig_dialog_created_by">Created by @reso7200</string>
<string name="ig_dialog_github_repo">ğŸŒ GitHub Repo</string>

<string name="ig_dialog_restart_message">âš ï¸ Clear app cache and restart?</string>
<string name="ig_dialog_restart_now">ğŸ” Restart Now</string>
<string name="ig_dialog_restart_not_found">Could not find the app to restart.</string>
<string name="ig_dialog_restart_failed">Restart failed: %1$s</string>
```

---

## 3) åœ¨ `app/src/main/res/values-zh-rCN/strings.xml` å¢åŠ ï¼ˆç®€ä¸­ï¼‰

åŒæ ·åŠ åˆ° `</resources>` å‰ï¼š

```xml
<!-- Instagram å†…æ³¨å…¥å¼¹çª—ï¼ˆXposed UIï¼‰ -->
<string name="ig_dialog_title">InstaEclipse ğŸŒ˜</string>
<string name="ig_dialog_menu_dev_options">ğŸ› å¼€å‘è€…é€‰é¡¹</string>
<string name="ig_dialog_menu_ghost_settings">ğŸ‘» å¹½çµæ¨¡å¼è®¾ç½®</string>
<string name="ig_dialog_menu_ad_analytics_block">ğŸ›¡ å¹¿å‘Š/åˆ†ææ‹¦æˆª</string>
<string name="ig_dialog_menu_distraction_free">ğŸ§˜ æ— å¹²æ‰° Instagram</string>
<string name="ig_dialog_menu_misc_features">âš™ æ‚é¡¹åŠŸèƒ½</string>
<string name="ig_dialog_menu_about">â„¹ï¸ å…³äº</string>
<string name="ig_dialog_menu_restart_app">ğŸ” é‡å¯åº”ç”¨</string>

<string name="ig_dialog_close">âŒ å…³é—­</string>
<string name="ig_dialog_back">â† è¿”å›</string>

<string name="ig_dialog_section_dev_options">å¼€å‘è€…é€‰é¡¹ ğŸ›</string>
<string name="ig_dialog_section_ghost_mode">å¹½çµæ¨¡å¼ ğŸ‘»</string>
<string name="ig_dialog_section_ad_analytics">å¹¿å‘Š/åˆ†ææ‹¦æˆª ğŸ›¡ï¸</string>
<string name="ig_dialog_section_distraction_free">æ— å¹²æ‰° Instagram ğŸ§˜</string>
<string name="ig_dialog_section_misc">æ‚é¡¹ âš™ï¸</string>
<string name="ig_dialog_section_about">å…³äº</string>
<string name="ig_dialog_section_restart">é‡å¯åº”ç”¨</string>
<string name="ig_dialog_section_quick_toggle">è‡ªå®šä¹‰å¿«é€Ÿå¼€å…³ ğŸ› ï¸</string>

<string name="ig_dialog_dev_enable">å¯ç”¨å¼€å‘è€…æ¨¡å¼</string>
<string name="ig_dialog_dev_import">ğŸ“¥ å¯¼å…¥å¼€å‘è€…é…ç½®</string>
<string name="ig_dialog_dev_export">ğŸ“¤ å¯¼å‡ºå¼€å‘è€…é…ç½®</string>
<string name="ig_dialog_error">é”™è¯¯</string>
<string name="ig_dialog_unable_open_ui">æ— æ³•æ‰“å¼€ InstaEclipse ç•Œé¢ã€‚</string>
<string name="ig_dialog_instagram_not_ready">Instagram æœªæ‰“å¼€æˆ–å°šæœªå‡†å¤‡å°±ç»ªã€‚</string>

<string name="ig_dialog_customize_quick_toggle">ğŸ›  è‡ªå®šä¹‰å¿«é€Ÿå¼€å…³</string>
<string name="ig_dialog_quick_include_hide_seen">åŒ…å«ï¼šéšè—å·²è¯»</string>
<string name="ig_dialog_quick_include_hide_typing">åŒ…å«ï¼šéšè—è¾“å…¥çŠ¶æ€</string>
<string name="ig_dialog_quick_include_disable_screenshot">åŒ…å«ï¼šç¦ç”¨æˆªå±æ£€æµ‹</string>
<string name="ig_dialog_quick_include_hide_view_once">åŒ…å«ï¼šå…è®¸é‡å¤æŸ¥çœ‹ä¸€æ¬¡æ€§å†…å®¹</string>
<string name="ig_dialog_quick_include_hide_story_seen">åŒ…å«ï¼šéšè—é™æ—¶åŠ¨æ€å·²è¯»</string>
<string name="ig_dialog_quick_include_hide_live_seen">åŒ…å«ï¼šéšè—ç›´æ’­å·²è¯»</string>

<string name="ig_dialog_ghost_hide_seen">éšè—å·²è¯»</string>
<string name="ig_dialog_ghost_hide_typing">éšè—è¾“å…¥çŠ¶æ€</string>
<string name="ig_dialog_ghost_disable_screenshot">ç¦ç”¨æˆªå±æ£€æµ‹</string>
<string name="ig_dialog_ghost_hide_view_once">å…è®¸é‡å¤æŸ¥çœ‹ä¸€æ¬¡æ€§å†…å®¹</string>
<string name="ig_dialog_ghost_hide_story_seen">éšè—é™æ—¶åŠ¨æ€å·²è¯»</string>
<string name="ig_dialog_ghost_hide_live_seen">éšè—ç›´æ’­å·²è¯»</string>

<string name="ig_dialog_ad_block_ads">æ‹¦æˆªå¹¿å‘Š</string>
<string name="ig_dialog_ad_block_analytics">æ‹¦æˆªåˆ†æ/è·Ÿè¸ª</string>
<string name="ig_dialog_ad_disable_tracking_links">ç§»é™¤é“¾æ¥è¿½è¸ªå‚æ•°</string>

<string name="ig_dialog_extreme_mode">æé™æ¨¡å¼ ğŸ”’ï¼ˆé‡æ–°å®‰è£…å‰ä¸å¯æ’¤é”€ï¼‰</string>
<string name="ig_dialog_disable_reels_except_dm">ç¦ç”¨ Reelsï¼ˆç§ä¿¡é™¤å¤–ï¼‰</string>
<string name="ig_dialog_extreme_confirm_title">å¯ç”¨æé™æ¨¡å¼ï¼Ÿ</string>
<string name="ig_dialog_extreme_confirm_message">å¯ç”¨åï¼Œåœ¨ä½ é‡æ–°å®‰è£…åº”ç”¨ä¹‹å‰æ— æ³•å…³é—­æ— å¹²æ‰°æ¨¡å¼ã€‚ç»§ç»­ï¼Ÿ</string>

<string name="ig_dialog_disable_repost">ç¦ç”¨è½¬å‘</string>

<string name="ig_dialog_created_by">ä½œè€…ï¼š@reso7200</string>
<string name="ig_dialog_github_repo">ğŸŒ GitHub ä»“åº“</string>

<string name="ig_dialog_restart_message">âš ï¸ æ¸…é™¤åº”ç”¨ç¼“å­˜å¹¶é‡å¯ï¼Ÿ</string>
<string name="ig_dialog_restart_now">ğŸ” ç«‹å³é‡å¯</string>
<string name="ig_dialog_restart_not_found">æ‰¾ä¸åˆ°è¦é‡å¯çš„åº”ç”¨ã€‚</string>
<string name="ig_dialog_restart_failed">é‡å¯å¤±è´¥ï¼š%1$s</string>
```

---

å¦‚æœä½ æ„¿æ„æŠŠä½ å½“å‰æ”¹åŠ¨ç›®æ ‡é™å®šä¸ºâ€œåªæ±‰åŒ–å¼¹çª—èœå•/å„å¼€å…³/è¿”å›å…³é—­æŒ‰é’®â€ï¼Œä¸Šé¢è¿™å¥—å°±å¤Ÿäº†ï¼›åšå®Œåé‡æ–°ç¼–è¯‘å®‰è£…æ¨¡å— APK å³å¯ç”Ÿæ•ˆã€‚é¡¹ç›®æœ¬èº«å·²ç»æœ‰ç®€ä¸­/ç¹ä¸­èµ„æºæ–‡ä»¶ï¼ˆ`values-zh-rCN` / `values-zh-rTW`ï¼‰ï¼Œåªæ˜¯å¼¹çª—éƒ¨åˆ†ç›®å‰æ²¡èµ°èµ„æºä½“ç³»ã€‚([GitHub][4])

[1]: https://raw.githubusercontent.com/ReSo7200/InstaEclipse/main/app/src/main/java/ps/reso/instaeclipse/mods/ui/UIHookManager.java "https://raw.githubusercontent.com/ReSo7200/InstaEclipse/main/app/src/main/java/ps/reso/instaeclipse/mods/ui/UIHookManager.java"
[2]: https://raw.githubusercontent.com/ReSo7200/InstaEclipse/main/app/src/main/java/ps/reso/instaeclipse/utils/dialog/DialogUtils.java "https://raw.githubusercontent.com/ReSo7200/InstaEclipse/main/app/src/main/java/ps/reso/instaeclipse/utils/dialog/DialogUtils.java"
[3]: https://raw.githubusercontent.com/ReSo7200/InstaEclipse/main/app/src/main/java/ps/reso/instaeclipse/utils/core/CommonUtils.java "https://raw.githubusercontent.com/ReSo7200/InstaEclipse/main/app/src/main/java/ps/reso/instaeclipse/utils/core/CommonUtils.java"
[4]: https://raw.githubusercontent.com/ReSo7200/InstaEclipse/main/app/src/main/res/values-zh-rCN/strings.xml "https://raw.githubusercontent.com/ReSo7200/InstaEclipse/main/app/src/main/res/values-zh-rCN/strings.xml"
